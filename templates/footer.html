{% load static %}
{% if internet %}
<footer class="glass-morphism mt-16 py-8">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
    <div class="flex items-center justify-center space-x-2 mb-4">
      <div
        class="bg-gradient-to-r from-purple-500 to-indigo-600 p-2 rounded-lg"
      >
        <i class="fas fa-book-open text-white"></i>
      </div>
      <span class="text-gray-800 font-semibold">Library Management System</span>
    </div>
    <p class="text-gray-600">
      &copy; 2025 Library Management. All rights reserved.
    </p>
  </div>
</footer>

<script>
  // Mobile menu toggle
  document
    .getElementById("mobileMenuButton")
    .addEventListener("click", function () {
      const mobileMenu = document.getElementById("mobileMenu");
      mobileMenu.classList.toggle("hidden");
    });

  // Desktop user dropdown toggle
  const userMenuButton = document.getElementById("userMenuButton");
  const userDropdown = document.getElementById("userDropdown");

  if (userMenuButton && userDropdown) {
    userMenuButton.addEventListener("click", function () {
      userDropdown.classList.toggle("hidden");
    });

    // Close dropdown when clicking outside
    document.addEventListener("click", function (event) {
      if (
        !userMenuButton.contains(event.target) &&
        !userDropdown.contains(event.target)
      ) {
        userDropdown.classList.add("hidden");
      }
    });
  }

  // Mobile user dropdown toggle (if logged in)
  const mobileUserMenuButton = document.getElementById("mobileUserMenuButton");
  const mobileUserDropdown = document.getElementById("mobileUserDropdown");

  if (mobileUserMenuButton && mobileUserDropdown) {
    mobileUserMenuButton.addEventListener("click", function () {
      mobileUserDropdown.classList.toggle("hidden");
    });

    // Close dropdown when clicking outside
    document.addEventListener("click", function (event) {
      if (
        !mobileUserMenuButton.contains(event.target) &&
        !mobileUserDropdown.contains(event.target)
      ) {
        mobileUserDropdown.classList.add("hidden");
      }
    });
  }

  // Modal handlers
  const loginBtn = document.getElementById("loginBtn");
  const registerBtn = document.getElementById("registerBtn");
  const getStartedBtn = document.getElementById("getStartedBtn");
  const loginModal = document.getElementById("loginModal");
  const registerModal = document.getElementById("registerModal");

  // Mobile buttons (new)
  const mobileLoginBtn = document.getElementById("mobileLoginBtn");
  const mobileRegisterBtn = document.getElementById("mobileRegisterBtn");

  // Show modals
  if (loginBtn) {
    loginBtn.addEventListener("click", () => {
      loginModal.classList.remove("hidden");
      document.body.style.overflow = "hidden";
    });
  }
  if (mobileLoginBtn) {
    mobileLoginBtn.addEventListener("click", () => {
      loginModal.classList.remove("hidden");
      document.body.style.overflow = "hidden";
      // auto-close mobile menu after opening modal
      document.getElementById("mobileMenu").classList.add("hidden");
    });
  }

  if (registerBtn) {
    registerBtn.addEventListener("click", () => {
      registerModal.classList.remove("hidden");
      document.body.style.overflow = "hidden";
    });
  }
  if (mobileRegisterBtn) {
    mobileRegisterBtn.addEventListener("click", () => {
      registerModal.classList.remove("hidden");
      document.body.style.overflow = "hidden";
      // auto-close mobile menu after opening modal
      document.getElementById("mobileMenu").classList.add("hidden");
    });
  }

  if (getStartedBtn) {
    getStartedBtn.addEventListener("click", () => {
      registerModal.classList.remove("hidden");
      document.body.style.overflow = "hidden";
    });
  }

  // Close modals
  document.getElementById("closeLoginModal").addEventListener("click", () => {
    loginModal.classList.add("hidden");
    document.body.style.overflow = "auto";
  });

  document
    .getElementById("closeRegisterModal")
    .addEventListener("click", () => {
      registerModal.classList.add("hidden");
      document.body.style.overflow = "auto";
    });

  // Close modals when clicking outside
  [loginModal, registerModal].forEach((modal) => {
    modal.addEventListener("click", (e) => {
      if (e.target === modal) {
        modal.classList.add("hidden");
        document.body.style.overflow = "auto";
      }
    });
  });

  // Message box auto-hide
  const messageBox = document.getElementById("message-box");
  const closeMessage = document.getElementById("closeMessage");

  if (messageBox) {
    // Auto hide after 5 seconds
    setTimeout(() => {
      messageBox.style.animation = "fadeOut 1s ease-out forwards";
      setTimeout(() => messageBox.remove(), 1000);
    }, 5000);

    // Manual close
    if (closeMessage) {
      closeMessage.addEventListener("click", () => {
        messageBox.style.animation = "fadeOut 0.3s ease-out forwards";
        setTimeout(() => messageBox.remove(), 300);
      });
    }
  }

  // Smooth scrolling for anchor links
  document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
    anchor.addEventListener("click", function (e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute("href"));
      if (target) {
        target.scrollIntoView({
          behavior: "smooth",
        });
      }
    });
  });
</script>
{% endif %}
